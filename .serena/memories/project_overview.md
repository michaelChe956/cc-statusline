# cc-statusline é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: cc-statusline
**è®¸å¯è¯**: Apache License 2.0
**è¯­è¨€**: Python 3.9+ (æ¨è 3.11)
**åŒ…ç®¡ç†å™¨**: uv

---

## ğŸ¯ é¡¹ç›®ç›®æ ‡

Claude Code çŠ¶æ€æ åŠŸèƒ½ç›¸å…³çš„ä»“åº“ï¼Œæä¾›å¯é…ç½®çš„çŠ¶æ€æ æ˜¾ç¤ºåŠŸèƒ½ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„ (Src Layout)

```
cc-statusline/
â”œâ”€â”€ src/cc_statusline/           # æºä»£ç 
â”‚   â”œâ”€â”€ __init__.py              # ç‰ˆæœ¬ä¿¡æ¯å’ŒåŒ…çº§å¯¼å‡º
â”‚   â”œâ”€â”€ __main__.py              # CLI å…¥å£ç‚¹
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ config/                  # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ cli/                     # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ engine/                  # å¼•æ“æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ scheduler.py         # ä»»åŠ¡è°ƒåº¦å™¨ (91% è¦†ç›–ç‡)
â”‚   â”‚   â””â”€â”€ statusline_engine.py # çŠ¶æ€æ å¼•æ“ (77% è¦†ç›–ç‡)
â”‚   â”œâ”€â”€ modules/                 # æ¨¡å—ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ base.py              # åŸºç¡€æ¨¡å— (87% è¦†ç›–ç‡)
â”‚   â”‚   â””â”€â”€ registry.py          # æ¨¡å—æ³¨å†Œè¡¨ (92% è¦†ç›–ç‡)
â”‚   â”œâ”€â”€ theme/                   # ä¸»é¢˜ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ builtins.py          # å†…ç½®ä¸»é¢˜
â”‚   â”‚   â””â”€â”€ loader.py            # ä¸»é¢˜åŠ è½½å™¨ (98% è¦†ç›–ç‡)
â”‚   â””â”€â”€ render/                  # æ¸²æŸ“ç³»ç»Ÿ
â”œâ”€â”€ tests/                       # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ conftest.py              # pytest é…ç½®å’Œå…±äº« fixtures
â”‚   â””â”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ test_base_module.py  # âœ… æ–°å¢ (13 æµ‹è¯•)
â”‚       â”œâ”€â”€ test_registry.py     # âœ… æ–°å¢ (25 æµ‹è¯•)
â”‚       â”œâ”€â”€ test_scheduler.py    # âœ… æ–°å¢ (37 æµ‹è¯•)
â”‚       â”œâ”€â”€ test_theme_loader.py # âœ… æ–°å¢ (27 æµ‹è¯•)
â”‚       â””â”€â”€ test_statusline_engine.py # âœ… æ–°å¢ (55 æµ‹è¯•)
â”œâ”€â”€ docs/                        # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ scripts/                     # å·¥å…·è„šæœ¬
â””â”€â”€ pyproject.toml               # é¡¹ç›®é…ç½®
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**: uv (æé€Ÿä¾èµ–ç®¡ç†)
- **æµ‹è¯•æ¡†æ¶**: pytest >= 7.4.0
- **è¦†ç›–ç‡**: pytest-cov >= 4.1.0
- **ä»£ç æ ¼å¼åŒ–**: black (è¡Œé•¿ 100)
- **ä»£ç æ£€æŸ¥**: ruff
- **ç±»å‹æ£€æŸ¥**: mypy
- **æ„å»ºå·¥å…·**: hatchling

### æ ¸å¿ƒä¾èµ–
- **å¼‚æ­¥æ”¯æŒ**: asyncio
- **çº¿ç¨‹å®‰å…¨**: threading.Lock
- **é…ç½®è§£æ**: YAML
- **ç±»å‹æç¤º**: typing (Python 3.9+)

---

## ğŸ“Š æµ‹è¯•çŠ¶æ€ (2026-01-29)

### æ ¸å¿ƒå¼•æ“æ¨¡å—æµ‹è¯•

| æ¨¡å— | è¦†ç›–ç‡ | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|------|-------|---------|------|
| theme/loader.py | 98% | 27 | âœ… |
| modules/registry.py | 92% | 25 | âœ… |
| engine/scheduler.py | 91% | 37 | âœ… |
| modules/base.py | 87% | 13 | âœ… |
| engine/statusline_engine.py | 77% | 55 | âœ… |
| **å¹³å‡** | **89%** | **157** | âœ… |

### æµ‹è¯•ç‰¹æ€§
- âœ… å•ä¾‹æ¨¡å¼è‡ªåŠ¨é‡ç½® (autouse fixture)
- âœ… çº¿ç¨‹å®‰å…¨æµ‹è¯• (uuid å”¯ä¸€æ€§)
- âœ… Mock å¤–éƒ¨ä¾èµ– (MagicMock, @patch)
- âœ… ä¸´æ—¶æ–‡ä»¶ç®¡ç† (tmp_path)
- âœ… AAA æ¨¡å¼ (Arrange-Act-Assert)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒåˆå§‹åŒ–

```bash
# å®‰è£… uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate  # macOS/Linux

# å®‰è£…ä¾èµ–
uv pip install -e ".[dev]"
```

### å¼€å‘å‘½ä»¤

```bash
# ä»£ç æ ¼å¼åŒ–
black src/ tests/

# ä»£ç æ£€æŸ¥
ruff check src/ tests/

# ç±»å‹æ£€æŸ¥
mypy src/

# è¿è¡Œæµ‹è¯•
pytest

# å¸¦è¦†ç›–ç‡æµ‹è¯•
pytest --cov=cc_statusline --cov-report=html
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—ä¾èµ–å…³ç³»

```
StatuslineEngine (å¼•æ“æ ¸å¿ƒ)
    â”œâ”€â”€ Scheduler (ä»»åŠ¡è°ƒåº¦)
    â”œâ”€â”€ ThemeLoader (ä¸»é¢˜åŠ è½½)
    â””â”€â”€ ModuleRegistry (æ¨¡å—æ³¨å†Œ)
            â””â”€â”€ BaseModule (åŸºç¡€æ¨¡å—)
```

### è®¾è®¡æ¨¡å¼

- **å•ä¾‹æ¨¡å¼**: ModuleRegistry ç¡®ä¿å…¨å±€å”¯ä¸€å®ä¾‹
- **å·¥å‚æ¨¡å¼**: ThemeLoader åŠ¨æ€åŠ è½½ä¸»é¢˜
- **è§‚å¯Ÿè€…æ¨¡å¼**: å›è°ƒæœºåˆ¶ (output_update, state_change, error)
- **ç­–ç•¥æ¨¡å¼**: DisplayMode æšä¸¾ (terminal, standalone)

---

## ğŸ“ å¼€å‘è§„èŒƒ

### Git æäº¤æ ¼å¼

```
<ç±»å‹>: <ç®€çŸ­æè¿°>

ç±»å‹:
- æ–°å¢: æ–°åŠŸèƒ½
- ä¿®å¤: Bug ä¿®å¤
- æ–‡æ¡£: æ–‡æ¡£æ›´æ–°
- é‡æ„: ä»£ç é‡æ„
- æµ‹è¯•: æµ‹è¯•ç›¸å…³
- é…ç½®: é…ç½®æˆ–å·¥å…·æ›´æ–°
```

### ä»£ç é£æ ¼
- ç±»å‹æ³¨è§£: æ‰€æœ‰å‡½æ•°å¿…é¡»æ·»åŠ 
- æ–‡æ¡£å­—ç¬¦ä¸²: ä¸­æ–‡ï¼ŒGoogle é£æ ¼
- å‘½åçº¦å®š: snake_case (å˜é‡/å‡½æ•°), PascalCase (ç±»)
- è¡Œé•¿é™åˆ¶: 100 å­—ç¬¦

---

## ğŸ”„ å‘å¸ƒæµç¨‹

1. æ›´æ–° CHANGELOG.md
2. æ›´æ–°ç‰ˆæœ¬å· (pyproject.toml å’Œ __init__.py)
3. è¿è¡Œå®Œæ•´æµ‹è¯•: `pytest`
4. åˆ›å»º Git æ ‡ç­¾: `git tag -a v0.x.x -m "ç‰ˆæœ¬æè¿°"`
5. æ„å»ºåˆ†å‘åŒ…: `python -m build`
6. å‘å¸ƒåˆ° PyPI: `twine upload dist/*`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- å•å…ƒæµ‹è¯•å®æ–½: `.serena/memories/session_20260129_unit_tests_implementation.md`
- é¡¹ç›®é…ç½®: `pyproject.toml`
- å¼€å‘æŒ‡å—: `CLAUDE.md`

---

**æœ€åæ›´æ–°**: 2026-01-29
**ç»´æŠ¤è€…**: Michael
**çŠ¶æ€**: âœ… æ ¸å¿ƒæ¨¡å—æµ‹è¯•å®Œæˆï¼Œè¦†ç›–ç‡ 89%
